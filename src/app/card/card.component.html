<div class="card" *ngIf="!isOpen">
    <div class="card__img"><img src="{{recipe.imageUrl}}"/></div>
    <div class="card__avatar" class="difficulty{{recipe.difficulty}} difficulty" [ngSwitch]="recipe.difficulty">
        <p *ngSwitchCase="1">Facile</p>
        <p *ngSwitchCase="2">Medio</p>
        <p *ngSwitchCase="3">Avanzato</p>
        <p *ngSwitchCase="4">Difficile</p>
        <p *ngSwitchCase="5">Usa just eat</p>
        <p *ngSwitchDefault="">0</p>
    </div>
    <div class="card__title">{{recipe.description}}</div>
    <div class="card__wrapper">
        <button class="card__btn" (click)="openBigCard()">Apri</button>
    </div>
</div>

<div [ngClass]="isOpen ? 'bigCardWrapper' : 'editCardWrapper'" *ngIf="isOpen || isEditOpen">
    <div class="editForm" *ngIf="isEditOpen">

        <h3>Generale</h3>

        <br>

        <div class="wave-group">
            <input required="" type="text" class="input" value="{{recipe.description}}">
            <span class="bar"></span>
            <label class="label">
              <span class="label-char" style="--index: 0">D</span>
              <span class="label-char" style="--index: 1">e</span>
              <span class="label-char" style="--index: 2">s</span>
              <span class="label-char" style="--index: 3">c</span>
              <span class="label-char" style="--index: 4">r</span>
              <span class="label-char" style="--index: 5">i</span>
              <span class="label-char" style="--index: 6">z</span>
              <span class="label-char" style="--index: 7">i</span>
              <span class="label-char" style="--index: 8">o</span>
              <span class="label-char" style="--index: 9">n</span>
              <span class="label-char" style="--index: 10">e</span>
            </label>
        </div>

        <br />

        <div class="wave-group">
            <input required="" type="text" class="input" value="{{recipe.imageUrl}}">
            <span class="bar"></span>
            <label class="label">
              <span class="label-char" style="--index: 0">I</span>
              <span class="label-char" style="--index: 1">m</span>
              <span class="label-char" style="--index: 2">m</span>
              <span class="label-char" style="--index: 3">a</span>
              <span class="label-char" style="--index: 4">g</span>
              <span class="label-char" style="--index: 5">i</span>
              <span class="label-char" style="--index: 6">n</span>
              <span class="label-char" style="--index: 7">e</span>
            </label>
        </div>

        <br />

        <div class="wave-group">
            <input required="" type="number" max="5" min="1" step="1" class="input" value="{{recipe.difficulty}}">
            <span class="bar"></span>
            <label class="label">
              <span class="label-char" style="--index: 0">D</span>
              <span class="label-char" style="--index: 1">i</span>
              <span class="label-char" style="--index: 2">f</span>
              <span class="label-char" style="--index: 3">f</span>
              <span class="label-char" style="--index: 4">i</span>
              <span class="label-char" style="--index: 5">c</span>
              <span class="label-char" style="--index: 6">o</span>
              <span class="label-char" style="--index: 7">l</span>
              <span class="label-char" style="--index: 8">t</span>
              <span class="label-char" style="--index: 9">à</span>
            </label>
        </div>

        <br />
        <br />

        <h3>Preparazione</h3>

        <br>
        <h5>Ingredienti</h5>
        <br>
        <div class="formScroll">
            <div *ngFor="let ingredient of recipe.ingredients">
                <div class="ingredientRow">
                    <div class="wave-group">
                        <input required="" type="text" class="input" value="{{ingredient.name}}">
                        <span class="bar"></span>
                        <label class="label">
                          <span class="label-char" style="--index: 0">N</span>
                          <span class="label-char" style="--index: 1">o</span>
                          <span class="label-char" style="--index: 2">m</span>
                          <span class="label-char" style="--index: 3">e</span>
                        </label>
                    </div>
                    <div class="wave-group">
                        <input required="" type="text" class="input" [value]="ingredient.quantity != -1 ? ingredient.quantity : 'quanto basta'">
                        <span class="bar"></span>
                        <label class="label">
                          <span class="label-char" style="--index: 0">Q</span>
                          <span class="label-char" style="--index: 1">t</span>
                          <span class="label-char" style="--index: 2">a</span>
                        </label>
                    </div>
                    <div class="wave-group">
                        <input required="" type="text" class="input" value="{{ingredient.unit}}">
                        <span class="bar"></span>
                        <label class="label">
                          <span class="label-char" style="--index: 0">U</span>
                          <span class="label-char" style="--index: 1">n</span>
                          <span class="label-char" style="--index: 2">i</span>
                          <span class="label-char" style="--index: 3">t</span>
                          <span class="label-char" style="--index: 4">à</span>
                        </label>
                    </div>
                </div>
                <br />
            </div>
        </div>
        <button class="card__btn__big" (click)="addIngredient()">+</button>

        <br>
        <h5>Passi</h5>
        <br>
        <div class="formScroll">
            <div *ngFor="let step of recipe.steps; index as i">
                <div class="wave-group">
                    <input required="" type="text" class="input" value="{{step}}">
                    <span class="bar"></span>
                    <label class="label">
                      <span class="label-char" style="--index: 0">S</span>
                      <span class="label-char" style="--index: 1">t</span>
                      <span class="label-char" style="--index: 2">e</span>
                      <span class="label-char" style="--index: 3">p</span>
                      <span class="label-char" style="--index: 4">&nbsp;</span>
                      <span class="label-char" style="--index: 4">{{i+1}}</span>
                    </label>
                </div>
                <br />
            </div>
        </div>
        <button class="card__btn__big" (click)="addStep()">+</button>
    </div>

    <div [ngClass]="{'bigCard': isOpen, 'editCard': isEditOpen}" class="bigCard">
        <div class="card__img__big"><img src="{{recipe.imageUrl}}"/></div>
        <div class="difficulty{{recipe.difficulty}} difficulty card__avatar__big" [ngSwitch]="recipe.difficulty">
            <p *ngSwitchCase="1">Facile</p>
            <p *ngSwitchCase="2">Medio</p>
            <p *ngSwitchCase="3">Avanzato</p>
            <p *ngSwitchCase="4">Difficile</p>
            <p *ngSwitchCase="5">Usa just eat</p>
            <p *ngSwitchDefault="">0</p>
        </div>
        <div class="card__title__big">{{recipe.description}}</div>
        <div class="card_scroll_big">
            <h3>Ingredienti</h3>
            <br>
            <ul>
                <li *ngFor="let ingredient of recipe.ingredients">{{ingredient.name}}  ⚖️{{ingredient.quantity != -1 ? ingredient.quantity + ' ' + ingredient.unit : "A sentimento"}}</li>
            </ul>
            <h3>Procedura</h3>
            <br>
            <ul>
                <li *ngFor="let step of recipe.steps">{{step}}</li>
            </ul>
        </div>
        <div class="card__wrapper">
            <button class="card__btn__big" (click)="openEditPage()">✏️</button>
            <button class="card__btn__big" (click)="closeButton()">Chiudi</button>
        </div>
    </div>
</div>