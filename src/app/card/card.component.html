<div class="card" *ngIf="!isOpen">
    <div class="card__img"><img src="{{recipe.imageUrl}}"/></div>
    <div class="card__avatar" class="difficulty{{recipe.difficulty}} difficulty" [ngSwitch]="recipe.difficulty">
        <p *ngSwitchCase="1">Facile</p>
        <p *ngSwitchCase="2">Medio</p>
        <p *ngSwitchCase="3">Avanzato</p>
        <p *ngSwitchCase="4">Difficile</p>
        <p *ngSwitchCase="5">Usa just eat</p>
        <p *ngSwitchDefault="">0</p>
    </div>
    <div class="card__title">{{recipe.description}}</div>
    <div class="card__wrapper">
        <button class="card__btn" (click)="openBigCard()">Apri</button>
    </div>
</div>

<div [ngClass]="isOpen ? 'bigCardWrapper' : 'editCardWrapper'" *ngIf="isOpen || isEditOpen">
    <div class="editForm" *ngIf="isEditOpen">

        <h2>Generale</h2>

        <br>

        <div class="wave-group">
            <input required="" type="text" class="input" value="{{recipe.description}}" (keyup)="editRecipe('description', $event)">
            <span class="bar"></span>
            <label class="label">
              <span class="label-char" style="--index: 0">D</span>
              <span class="label-char" style="--index: 1">e</span>
              <span class="label-char" style="--index: 2">s</span>
              <span class="label-char" style="--index: 3">c</span>
              <span class="label-char" style="--index: 4">r</span>
              <span class="label-char" style="--index: 5">i</span>
              <span class="label-char" style="--index: 6">z</span>
              <span class="label-char" style="--index: 7">i</span>
              <span class="label-char" style="--index: 8">o</span>
              <span class="label-char" style="--index: 9">n</span>
              <span class="label-char" style="--index: 10">e</span>
            </label>
        </div>

        <br />

        <div class="wave-group">
            <input required="" type="text" class="input" value="{{recipe.imageUrl}}" (keyup)="editRecipe('imageUrl', $event)">
            <span class="bar"></span>
            <label class="label">
              <span class="label-char" style="--index: 0">I</span>
              <span class="label-char" style="--index: 1">m</span>
              <span class="label-char" style="--index: 2">m</span>
              <span class="label-char" style="--index: 3">a</span>
              <span class="label-char" style="--index: 4">g</span>
              <span class="label-char" style="--index: 5">i</span>
              <span class="label-char" style="--index: 6">n</span>
              <span class="label-char" style="--index: 7">e</span>
            </label>
        </div>

        <br />
        <div class="wave-group">
            <input required="" type="number" max="5" min="1" step="1" class="input" value="{{recipe.difficulty}}" (keyup)="editRecipe('difficulty', $event)">
            <span class="bar"></span>
            <label class="label">
              <span class="label-char" style="--index: 0">D</span>
              <span class="label-char" style="--index: 1">i</span>
              <span class="label-char" style="--index: 2">f</span>
              <span class="label-char" style="--index: 3">f</span>
              <span class="label-char" style="--index: 4">i</span>
              <span class="label-char" style="--index: 5">c</span>
              <span class="label-char" style="--index: 6">o</span>
              <span class="label-char" style="--index: 7">l</span>
              <span class="label-char" style="--index: 8">t</span>
              <span class="label-char" style="--index: 9">√†</span>
            </label>
        </div>

        <br />
        <br />

        <h2>Preparazione</h2>

        <br>
        <h3>Ingredienti</h3>
        <br>
        <div class="formScroll">
            <div *ngFor="let ingredient of recipe.ingredients; index as i">
                <div class="ingredientRow">
                    <div class="wave-group">
                        <input required="" type="text" class="input" value="{{ingredient.name}}" (keyup)="editRecipe('ingredients', $event, i, 'name')">
                        <span class="bar"></span>
                        <label class="label">
                          <span class="label-char" style="--index: 0">N</span>
                          <span class="label-char" style="--index: 1">o</span>
                          <span class="label-char" style="--index: 2">m</span>
                          <span class="label-char" style="--index: 3">e</span>
                        </label>
                    </div>
                    <div class="wave-group">
                        <input required="" type="text" class="input" [value]="ingredient.quantity != -1 ? ingredient.quantity : 'quanto basta'" (keyup)="editRecipe('ingredients', $event, i, 'quantity')">
                        <span class="bar"></span>
                        <label class="label">
                          <span class="label-char" style="--index: 0">Q</span>
                          <span class="label-char" style="--index: 1">t</span>
                          <span class="label-char" style="--index: 2">a</span>
                        </label>
                    </div>
                    <div class="wave-group">
                        <input required="" type="text" class="input" value="{{ingredient.unit}}" (keyup)="editRecipe('ingredients', $event, i, 'unit')">
                        <span class="bar"></span>
                        <label class="label">
                          <span class="label-char" style="--index: 0">U</span>
                          <span class="label-char" style="--index: 1">n</span>
                          <span class="label-char" style="--index: 2">i</span>
                          <span class="label-char" style="--index: 3">t</span>
                          <span class="label-char" style="--index: 4">√†</span>
                        </label>
                    </div>
                    <button required="" type="text" class="input card__btn__big" style="min-width: 50px; min-height: 50px;" value="{{ingredient.unit}}" (click)="deleteFromArray('ingredients', i)">üóëÔ∏è</button>
                </div>
                <br />
            </div>
        </div>
        <button class="card__btn__big" (click)="addIngredient()">+</button>

        <br>
        <h3>Passi</h3>
        <br>
        <div class="formScroll">
            <div *ngFor="let step of recipe.steps; index as i">
                <div class="stepRow">
                    <div class="wave-group">
                        <input required="" type="text" class="input" value="{{step}}" (change)="editRecipe('steps', $event, i)">
                        <span class="bar"></span>
                        <label class="label">
                          <span class="label-char" style="--index: 0">S</span>
                          <span class="label-char" style="--index: 1">t</span>
                          <span class="label-char" style="--index: 2">e</span>
                          <span class="label-char" style="--index: 3">p</span>
                          <span class="label-char" style="--index: 4">&nbsp;</span>
                          <span class="label-char" style="--index: 4">{{i+1}}</span>
                        </label>
                    </div>
                    <button required="" type="text" class="input" style="width: 50px; height: 50px;" class="card__btn__big" (click)="deleteFromArray('steps', i)">üóëÔ∏è</button>
                </div>
                <br />
            </div>
        </div>
        <button class="card__btn__big" (click)="addStep()">+</button>
    </div>

    <div [ngClass]="{'bigCard': isOpen, 'editCard': isEditOpen}" class="bigCard">
        <div class="card__img__big"><img src="{{recipe.imageUrl}}"/></div>
        <div class="difficulty{{recipe.difficulty}} difficulty card__avatar__big" [ngSwitch]="recipe.difficulty">
            <p *ngSwitchCase="1">Facile</p>
            <p *ngSwitchCase="2">Medio</p>
            <p *ngSwitchCase="3">Avanzato</p>
            <p *ngSwitchCase="4">Difficile</p>
            <p *ngSwitchCase="5">Usa just eat</p>
            <p *ngSwitchDefault="">0</p>
        </div>
        <div class="card__title__big">{{recipe.description}}</div>
        <div class="card_scroll_big">
            <h3>Ingredienti</h3>
            <br>
            <ul>
                <li *ngFor="let ingredient of recipe.ingredients">{{ingredient.name}}  ‚öñÔ∏è{{ingredient.quantity != -1 ? ingredient.quantity + ' ' + ingredient.unit : "A sentimento"}}</li>
            </ul>
            <h3>Procedura</h3>
            <br>
            <ul>
                <li *ngFor="let step of recipe.steps">{{step}}</li>
            </ul>
        </div>
        <div class="card__wrapper">
            <button *ngIf="!isEditOpen" class="card__btn__big" (click)="openEditPage()">‚úèÔ∏è</button>
            <button *ngIf="isEditOpen" class="card__btn__big" (click)="saveRecipe()">‚úîÔ∏è</button>
            <button *ngIf="isEditOpen" class="card__btn__big" (click)="deleteRecipe()">‚ùå</button>
            <button class="card__btn__big" (click)="closeButton()">Chiudi</button>
        </div>
    </div>
</div>